.386 
.MODEL FLAT 

.CODE 

REPLACE MACRO 
LOCAL MAINLOOP, EX, REPL 

MAINLOOP: 
  CMP BYTE PTR [EAX], 20h 
  JE EX 
  CMP BYTE PTR [EAX], 0h 
  JE EX 
  CMP BYTE PTR [EAX], DL 
  JE REPL 
  INC EAX 
  JMP MAINLOOP 
  
REPL: 
  MOV BYTE PTR [EAX], CL 
  INC EAX 
  JMP MAINLOOP 
  
EX: 
ENDM 

NextWord MACRO 
LOCAL MAINLOOP, EX, NEXT 

MAINLOOP: 
  CMP BYTE PTR [EAX], 20h 
  JE NEXT 
  JMP EX 
NEXT: 
  INC EAX 
  JMP MAINLOOP
 
EX: 
ENDM 

PUBLIC _ReplaceChar 

_ReplaceChar PROC 

PUSH EBP 
  MOV EBP, ESP 
  MOV EAX, [EBP + 16] ;text 
  MOV ECX, [EBP + 12] ;replacement 
  MOV EDX, [EBP + 8] ;symbol 

MAINLOOP: 
  CMP BYTE PTR [EAX], 0h 
  JE EX 
  REPLACE 
  NextWord 
  JMP MAINLOOP 
  
EX: 
  POP EBP 
  
RET 
_ReplaceChar ENDP 

END
